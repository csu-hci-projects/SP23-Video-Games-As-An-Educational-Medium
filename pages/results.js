import Head from 'next/head'
import styled from 'styled-components'
import styles from '@/styles/Home.module.css'
import { useState, useEffect } from 'react'

const Hero = styled.div`
  height: 80vh;
  display: flex;
  justify-content: start;
  align-items: center;
  padding: 2rem;
  z-index: 100;
  `

const Heading = styled.h1`
  color: #fff;
  font-size: 4rem;
  font-weight: 900;
  margin-left: 2%;
  margin-bottom: 3%;`

const Text = styled.h3`
  color: #fff;
  font-weight: 500;
  margin-top: 4%;
  margin-left: 10%;
  font-size: 2rem;
`

const LeftAnswers = styled.h4`
  color: #fff;
  font-weight: 500;
  margin-top: 6%;
  margin-left: 15%;
  font-size: 1.5rem;
  width: 20%;
`

const RightAnswers = styled.h4`
  color: #fff;
  font-weight: 500;
  margin-top: 6%;
  margin-left: 15%;
  font-size: 1.5rem;
`

const HeroCol = styled.div`
  padding: 1rem;
`
const ColWrapper = styled.div`
  display: flex;
  justify-content: flex-start;
  align-items: flex-start;

`

const DivLeft = styled(HeroCol)`
  margin-left: 10%;
`

const DivRight = styled(HeroCol)`
  width:10%;
  
`

const countryOrder = ["Mali, ", "Chad, ", "Burkina, ", "Eritrea, ", "Central African Republic, ", "Angola, ", "Benin, ", "Cape Verde, ", "Democratic Republic of Congo, ", "Botswana, ", "Ivory Coast, ", "Algeria, ", "Egypt, ", "Equatorial Guinea, ", "Comoros, ", "Sao Tome, ", "Djibouti"];

export default function Results() {
  const [TestTime, setTestTime] = useState('');
  const [score, setScore] = useState('');
  const [choices, setChoices] = useState('');

  
  useEffect(() => {
    const time = window.localStorage.getItem('userTime');
    const score = window.localStorage.getItem('userScore');
    const answers = window.localStorage.getItem('userChoices');
    const count = score.split('true').length-1;
    const result = count / 17;

    setTestTime(time);
    setScore((result*100).toFixed(2));
    setChoices(answers);
  }, []);

    return (
      <>
        <Head> 
            <title>Results</title>
            <meta name="description" content="Generated by create next app" />
            <meta name="viewport" content="width=device-width, initial-scale=1" />
            <link rel="icon" href="/favicon.ico" />
        </Head>
          <Heading>Results</Heading>
          <Text>Participant Completion Time: {TestTime} Seconds</Text>
          <Text>Percentage Correct: {score}%</Text>
          <ColWrapper className={styles.colWrapper}>
            <DivLeft className={styles.cols}>
              <Text>Participant Answers:</Text>
              <LeftAnswers>{choices}</LeftAnswers>
            </DivLeft>
            <DivRight className={styles.cols}>
              <RightAnswers>Mali, Chad, Burkina, Eritrea, Central African Republic, Angola, Benin, Cape Verde, Democratic Republic of Congo, Botswana, Ivory Coast, Algeria, Egypt, Equatorial Guinea, Comoros, Sao Tome, Djibouti</RightAnswers>
            </DivRight>
          </ColWrapper>

      </>
    )
  }